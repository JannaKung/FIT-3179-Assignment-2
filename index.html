<!DOCTYPE html>
<html lang="en">

<head>
  <title>Australia's Energy Growth</title>
  <!-- Import Vega & Vega-Lite-->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>

  <!-- Import pure.css -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
    integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,600;1,600&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,600;1,600&display=swap" rel="stylesheet">

  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="css/style.css" media="all">
</head>

<body>
  <div class="page">

    <!-- pure grid group -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <h1>Australia's Energy Journey: Balancing Non-Renewable and Renewable Sources</h1>
        <div class="container">
          <img src="image/nature.jpg">
          <div class="text-box">
        <p>Lorem ipsum dolor sit amet, eum dicta saperet instructior no, at sensibus complectitur per,
          usu hinc augue ei. Ad amet homero evertitur mei. Posse quidam convenire ei mel. Quando regione eu eam, tota latine vocibus mei ad.
          His ad hendrerit voluptatibus, mel et liber mollis, illud dicant scaevola pro ei. Ex pri quod dolore percipit.
          Sea ne appetere imperdiet adipiscing.</p>
          </div>
          <img src="image/wind.jpg">
          </div>
      </div>
    </div>
    <!-- end pure grid group -->

    <!-- map container -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <div class="map-container">
          <div id="map"></div>
          <div class="container">
            <div class="text-box">
              <p>Lorem ipsum dolor sit amet, eum dicta saperet instructior no, at sensibus complectitur per, usu hinc augue ei. Ad amet homero evertitur mei. Posse quidam convenire ei mel.</p>
            </div>

            <div class="text-box">
              <p>Quando regione eu eam, tota latine vocibus mei ad. His ad hendrerit voluptatibus, mel et liber mollis, illud dicant scaevola pro ei. Ex pri quod dolore percipit. Sea ne appetere imperdiet adipiscing.</p>
            </div>
          </div>
      </div>
    </div>

    <!-- industry container -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <div class="vis-container">
          <div id="industry_chart"></div>
          <!-- Dropdown for selecting year -->
          <div id="dropdown">
            <label for="Year_Selection">Year: </label>
            <select id="Year_Selection">
                <option value="2011">2011</option>
                <option value="2012">2012</option>
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
                <option value="2021">2021</option>
                <option value="2022" selected>2022</option>
            </select>
          </div>
          <div class="container">
            <div class="text-box">
              <p>Lorem ipsum dolor sit amet, eum dicta saperet instructior no, at sensibus complectitur per, usu hinc augue ei. Ad amet homero evertitur mei. Posse quidam convenire ei mel.</p>
            </div>

            <div class="text-box">
              <p>Quando regione eu eam, tota latine vocibus mei ad. His ad hendrerit voluptatibus, mel et liber mollis, illud dicant scaevola pro ei. Ex pri quod dolore percipit. Sea ne appetere imperdiet adipiscing.</p>
            </div>
        </div>
      </div>
    </div>
    <!-- end pure grid group -->

        <!-- supply container -->
        <div class="pure-g">
          <div class="pure-u-1-1">
            <div class="vis-container">
              <div id="supply_graph"></div>
            <div class="container">
              <div class="text-box">
                <p>Lorem ipsum dolor sit amet, eum dicta saperet instructior no, at sensibus complectitur per, usu hinc augue ei. Ad amet homero evertitur mei. Posse quidam convenire ei mel.</p>
              </div>

              <div class="text-box">
                <p>Quando regione eu eam, tota latine vocibus mei ad. His ad hendrerit voluptatibus, mel et liber mollis, illud dicant scaevola pro ei. Ex pri quod dolore percipit. Sea ne appetere imperdiet adipiscing.</p>
              </div>
          </div>
        </div>

       <!-- Donut Charts Section -->
       <div class="pure-g">
        <div class="pure-u-1-1">
          <div class="vis-container">
            <h2>Top 5 State-Level Energy Consumption for Renewable vs. Non-Renewable</h2>
            <div id="donut_graph_nr"></div>
            <div id="donut_graph_r"></div>
            <div id="dropdown">
              <label for="state_selection">State: </label>
              <select id="state_selection">
                  <option value="NSW">NSW</option>
                  <option value="QLD">QLD</option>
                  <option value="SA">SA</option>
                  <option value="VIC">VIC</option>
                  <option value="WA">WA</option>
                  <option value="All" selected>All</option>
              </select>
              </div>
              <div class="container">
                <div class="text-box">
                  <p>Lorem ipsum dolor sit amet, eum dicta saperet instructior no, at sensibus complectitur per, usu hinc augue ei. Ad amet homero evertitur mei. Posse quidam convenire ei mel.</p>
                </div>

                <div class="text-box">
                  <p>Quando regione eu eam, tota latine vocibus mei ad. His ad hendrerit voluptatibus, mel et liber mollis, illud dicant scaevola pro ei. Ex pri quod dolore percipit. Sea ne appetere imperdiet adipiscing.</p>
                </div>
          </div>
          </div>
        </div>
      </div>

      <div class="source-container">
        <span class="data-source">Data source: "".</span>
        <span class="image-source">Images: ""</span>
      </div>


    <script type="text/javascript">
      var choropleth_map = "js/choropleth_map.vg.json";
      var concat_graph = "js/concat_industries_final.vg.json";
      var supply_graph = "js/sources_combined.vg.json";
      var donut_graph_nr = "js/donut_non_renewable.vg.json";
      var donut_graph_r = "js/donut_renewable.vg.json";

      // Embed the choropleth map
      vegaEmbed('#map', choropleth_map, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
      }).catch(console.error);

      // Embed the industry graph in the correct container
      vegaEmbed('#industry_chart', concat_graph, { "actions": false }).then(({ view }) => {
        const selectYear = document.getElementById('Year_Selection');

        // Update the view when the dropdown value changes
        selectYear.addEventListener('change', function () {
          view.signal('Year_selection', parseInt(this.value)).run();
        });
      }).catch(console.error);

         // Embed the supply
      vegaEmbed('#supply_graph', supply_graph, { "actions": false }).then(function (result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
      }).catch(console.error);

      // Function to update both charts with the selected state
      function updateDonutCharts(selectedState) {
        donutViewNR.signal('state_selection', selectedState).run(); // Non-Renewable chart
        donutViewR.signal('state_selection', selectedState).run();  // Renewable chart
      }

      var donutViewNR, donutViewR; // Variables to store the chart views

      // Embed Non-Renewable Donut Chart
      vegaEmbed('#donut_graph_nr', donut_graph_nr, { actions: false })
        .then(({ view }) => {
          donutViewNR = view; // Store the non-renewable chart view

          // Set initial state selection
          const stateDropdown = document.getElementById('state_selection');
          stateDropdown.addEventListener('change', (event) => {
            const selectedState = event.target.value;
            updateDonutCharts(selectedState); // Update both charts when state changes
          });
        })
        .catch(console.error);

      // Embed Renewable Donut Chart
      vegaEmbed('#donut_graph_r', donut_graph_r, { actions: false })
        .then(({ view }) => {
          donutViewR = view; // Store the renewable chart view

          // Ensure dropdown interaction also affects this chart
          const stateDropdown = document.getElementById('state_selection');
          stateDropdown.addEventListener('change', (event) => {
            const selectedState = event.target.value;
            updateDonutCharts(selectedState); // Update both charts when state changes
          });
        })
        .catch(console.error);

    </script>

  </div>
</body>

</html>
